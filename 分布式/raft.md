### Raft

#### 算法过程

Raft 算法的过程可以简述为以下几个关键步骤：

1. 领导选举阶段：
   - 当系统启动或者当前领导者失效时，节点进入候选人状态，并增加自己的任期号（term）。
   - 候选人向其他节点发送投票请求，请求包含候选人的任期号和候选人的身份信息。
   - 节点收到投票请求后，检查请求中的任期号和自身的任期号进行比较：
     - 如果请求中的任期号较小，拒绝投票。
     - 如果请求中的任期号较大，将自己的任期号更新为请求中的任期号，并转变为跟随者状态。
   - 如果候选人收到多数节点的投票（包括自己的一票），则成为新的领导者。
2. 日志复制阶段：
   - 领导者接收客户端的请求并将其作为日志条目追加到自己的日志中。
   - 领导者将新的日志条目并行地发送给其他跟随者节点。
   - 跟随者节点收到日志条目后，在自己的日志末尾追加该条目，并向领导者发送确认信息。
   - 一旦领导者收到多数节点的确认信息，该日志条目被视为已提交，领导者将通知其他节点进行相应的状态更新。
3. 安全性机制：
   - Raft 算法采用多数投票原则来确保一致性。
   - 在选举阶段，候选人必须获得多数节点的选票才能成为新的领导者。
   - 在日志复制阶段，领导者必须等待多数节点确认已提交的日志条目，才能将其视为已提交。
4. 角色切换机制：
   - 跟随者节点在一段时间内没有收到领导者的心跳消息时，会成为候选人并发起选举。
   - 候选人节点在选举过程中，如果获得多数票，则成为新的领导者。
   - 领导者节点如果在与其他节点通信时出现故障，会停止发送心跳消息，导致其他节点重新发起选举