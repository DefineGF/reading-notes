#### 基于 mmap

传统工作方式：磁盘 -> 内核空间 -> 用户空间；

mmap 方式：

> 1. 内核从固态硬盘上读取文件内容：当应用程序请求打开一个文件时，内核负责从固态硬盘上读取文件的内容到内核空间的缓冲区中。
> 2. 内核与用户空间进行内存映射：内核将文件的内容通过内存映射的方式映射到应用程序的虚拟地址空间中，即将文件的内容映射到用户空间的内存中。这样，应用程序可以直接访问内存中的文件内容。
> 3. 用户程序对内存中文件内容的修改对内核可见：当应用程序修改内存中映射文件的内容时，这些修改对内核是可见的。内核通过页表等机制跟踪内存页面的状态，可以检测到被修改的内存页面，并标记为"脏页"。
> 4. 内核将脏页写回到磁盘：内核会根据操作系统的缓存管理机制和策略，将被修改的脏页定期或在特定条件下写回到固态硬盘上的文件中，以保持内存与磁盘文件的一致性。