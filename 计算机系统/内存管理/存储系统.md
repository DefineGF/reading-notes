#### 存储系统

CPU <--> Cache(SRAM) <--> MM(DRAM) <--> 辅存(ROM)

系统程序区：使用ROM，断电数据不丢失；防止修改、误删

用户程序区：使用 RAM

##### Cache 与 虚拟存储器

- Cache主要提高系统速度；虚拟存储器主要为了主存容量；

- Cache全由硬件实现（硬件存储器），对程序员透明；虚拟存储器由OS和硬件存储共同实现，逻辑上存储器，对系统程序员不透明；
- 虚拟存储器不命中时影响更大；
- Cache不命中时，CPU能够直接访问主存并将数据存入Cache；虚拟存储器不命中时先由硬盘存入内存，而不能与CPU直接通信；



##### 访存过程

1. CPU给出虚拟地址，快表中查找有无对应的页表项；
2. TLB缺失：
    - 访问主存中的页表：
        - 存在：更新TLB并将虚拟地址转换为物理地址；
        - 不存在：若存在空闲页框，直接从磁盘中读出一页到主存；不存在空闲页框则换出主存中的一页；
3. 对应页表项在TLB：
    - 对应主存块存在 Cache 中：访问Cache读取数据；
    - 对应主存块不在Cache中：Cache有空闲行，则主存块送入Cache；否则替换；

 ![image-20210313222558347](F:\Typora\Nodes\计算机系统\存储\image-20210313222558347.png)

