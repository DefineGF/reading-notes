#### 空间分配

allocate 实现空间的申请，申请内存分为一级配置器和二级配置器；分配的空间小于128B调用二级配置器，由内存池实现；大于128则直接使用一级配置器，由malloc实现。



##### 二级配置器

*   \_\_ALIGN：8字节
*   \_\_MAX\_BYTES：最大分配的内存大小
*   \_\_NFREELISTS：链表个数，每个链表保存的大小都是8的倍数，而且都比前一个大8B，分别是8，16，24，32，，，128等



对齐操作，不满8的倍数填充成8的倍数，返回链表索引：

```c
static size_t FREELIST_INDEX(size_t bytes) \
{\
	return (((bytes) + __ALIGN - 1) / __ALIGN - 1); \
}
```

