#### 执行过程

1. 找到可执行文件，检查其类型是否是可执⾏⽂件；并通过程序⾸部信息，确定代和数据在可执⾏⽂件中的位置并计算出对应的磁盘块地址；

2. 创建新进程，将可执行文件映射到进程中；

   1. 为新进程分配一个虚拟的地址空间：由连续的虚拟页构成；用于存放进程的代码、数据和堆栈等；
   2. 创建页表：为进程创建页表，用于将进程的虚拟地址映射到物理内存地址；
   3. 读取可执行文件：os将可执行文件的内容读取到内存中的物理页中；
   4. 建立虚拟地址与物理地址的映射关系：通过修改进程的物理页表来实现；os可以将不同的代码段、数据段和堆栈映射到不同的虚拟页上；

3. 执行程序指令，可能触发缺页中断；当程序执行到需要访问某个虚拟地址所对应的页面时，如果该页面当前不在物理内存中，就会触发缺页中断。

   - 代码段中的某个指令需要被执行，但该指令所在的页面还未加载到物理内存中。

   - 数据段中的某个变量或数据需要被读取或写入，但该变量或数据所在的页面还未加载到物理内存中。

   - 动态链接库（shared library）中的某个函数或数据需要被访问，但所需的页面还未加载到物理内存中。



> 当发生缺页中断时，操作系统会中断程序的执行，并根据缺失页面的信息，将相应的页面从磁盘中加载到物理内存中。然后，操作系统会更新页表，建立虚拟地址到物理地址的映射关系，并重新启动被中断的程序，使其从中断发生的地方继续执行