#### session 工作原理

1. 客户端发送请求：当用户通过浏览器发送请求给服务器时，不会携带特定的会话信息。
2. 服务器创建会话：服务器在接收到请求后，为该用户创建一个唯一的会话标识符（Session ID），并将该标识符存储在服务器端的某个存储介质中，例如内存或数据库。
3. 会话标识符发送给客户端：服务器将会话标识符发送给客户端，通常以 Cookie 的形式存储在响应头中，名为 "Set-Cookie"。
4. 客户端存储会话标识符：浏览器接收到响应后，会将会话标识符存储在客户端的 Cookie 存储区域中。
5. 客户端发送会话标识符：在随后的请求中，浏览器会自动将会话标识符附加在请求头中发送给服务器。
6. 服务器读取会话标识符：服务器在接收到请求时，可以通过读取请求头中的会话标识符，找到对应的会话信息。
7. 服务器处理会话：服务器根据会话标识符在服务器端存储的会话数据中获取用户的身份验证信息和状态信息，进行相应的处理。

##### http 常见请求与响应头

请求头：

1. **Host**：指定目标服务器的主机名和端口号。
2. **User-Agent**：发送请求的用户代理（通常是浏览器）的标识信息。
3. **Accept**：指定客户端能够处理的响应内容类型，用于内容协商。
4. **Content-Type**：指定请求体中的数据类型，例如表单数据、JSON 数据等。
5. **Authorization**：用于身份验证，包含身份验证凭据，如基本认证、Bearer 令牌等。
6. **Cookie**：包含客户端保存的 Cookie 信息，用于服务器识别用户身份。
7. **Referer**：指示请求的来源页面的 URL，用于防止盗链和追踪访问来源。
8. **Cache-Control**：指定请求和响应的缓存机制，如缓存的有效期、是否使用缓存等。
9. **Content-Length**：指定请求体的长度，以字节为单位

响应头：

1. **Content-Type**：指定响应体的数据类型，例如 text/html、application/json 等。
2. **Set-Cookie**：设置客户端的 Cookie，包含要存储的键值对和其他属性（如过期时间、域等）。
3. **Location**：指定重定向的 URL，用于实现页面跳转或重定向。
4. **Cache-Control**：指定响应的缓存机制，如缓存的有效期、是否允许缓存等。
5. **Content-Length**：指定响应体的长度，以字节为单位。
6. **ETag**：指定响应实体的标识符，用于实体标识和缓存验证。
7. **Access-Control-Allow-Origin**：指定允许跨域请求的源，用于实现跨域资源共享（CORS）。
8. **Server**：指定提供响应的服务器软件（如 Apache、Nginx 等）的名称和版本



#### JWT

##### 工作过程

1. 用户身份验证：当用户通过身份验证（例如用户名和密码）成功登录后，服务器会生成一个JWT并将其返回给客户端。
2. JWT的结构：JWT由三个部分组成，每个部分之间用句点（.）分隔。这三部分依次是：头部（Header）、载荷（Payload）和签名（Signature）。
   - 头部：包含描述JWT的元数据和算法类型，通常使用Base64编码。
   - 载荷：包含要传输的声明信息，例如用户ID、角色等。载荷也可以包含其他自定义的声明。
   - 签名：通过使用私钥或密钥对头部和载荷进行签名，以验证JWT的完整性。
3. 客户端请求：客户端在每次请求中将JWT放置在请求的头部（通常使用"Authorization"字段）或参数中。
4. 服务器验证：服务器在接收到请求时，从JWT中提取出载荷和签名，并使用相同的密钥对其进行验证。如果验证成功，服务器可以信任JWT中的声明，并执行相应的操作。

##### 应用场景

1. 身份验证和授权：JWT常用于身份验证和授权场景。用户登录成功后，服务器可以生成JWT并将其返回给客户端，以后客户端在每次请求中携带JWT，服务器可以通过验证JWT的签名来验证用户的身份和授权权限。
2. 单点登录（SSO）：在分布式系统中，可以使用JWT来实现单点登录。用户登录后，在所有相关的系统中使用同一个JWT进行身份验证，而无需再次输入凭据。
3. 信息交换：JWT可以用于安全地传输信息。由于JWT的载荷部分可以包含自定义的声明信息，可以将业务相关的信息嵌入到JWT中，并在不同的系统之间传递。
4. 重置密码和忘记密码：当用户请求重置密码或忘记密码时，可以使用JWT生成一个包含重置密码或重置链接的令牌，并发送给用户。用户在重置密码时将该令牌发送回服务器进行验证

##### 单点登录

单点登录（Single Sign-On，简称 SSO）是一种身份验证和授权机制，允许用户通过一次登录来访问多个相关的应用或系统，而无需在每个应用中单独进行身份验证。简单来说，SSO 允许用户在通过认证后，在一段时间内无需再次输入凭据即可访问其他应用或系统。

SSO 的工作原理如下：

1. 用户访问应用A：用户初次访问其中一个应用（称为身份提供者），需要进行身份验证。
2. 重定向到认证中心：如果用户还没有进行认证，应用A将用户重定向到认证中心（称为身份提供者）。
3. 用户输入凭据：用户在认证中心中输入用户名和密码等凭据进行身份验证。
4. 认证中心发放令牌：认证中心验证用户凭据的合法性后，发放一个令牌（通常是一个加密的令牌）给用户。
5. 令牌发送给应用A：认证中心将令牌发送回应用A。
6. 应用A验证令牌：应用A接收到令牌后，向认证中心验证令牌的有效性和真实性。
7. 用户访问其他应用：一旦应用A验证通过，用户可以访问其他相关的应用B、C等（称为服务提供者），无需再次输入凭据。
8. 令牌的使用和更新：其他应用接收到令牌后，可以使用令牌中的信息进行用户身份验证和授权。在一定时间范围内，令牌可以被多个应用使用。如果令牌过期，应用可以向认证中心请求刷新令牌。

通过使用单点登录，用户可以避免在多个应用之间频繁输入凭据，提高用户体验。同时，SSO 也可以提供更好的安全性，因为用户只需要在认证中心进行一次身份验证，而不需要在每个应用中都进行身份验证，减少了密码泄露和管理的风险