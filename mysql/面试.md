### 视图

在 MySQL 中，视图（View）是虚拟表，是由一个或多个表的查询结果组成的命名查询；

视图本身并不存储数据，而是基于查询定义的逻辑结构；

它可以被视为一个虚拟表，可以像表一样进行查询、过滤和连接操作。

#### 作用

1. 简化复杂查询：视图可以将复杂的查询逻辑封装起来，使得用户只需关注简单的表操作，而无需了解底层的查询逻辑。这样可以减少编写重复代码的工作量，并提高查询的可读性和可维护性。
2. 数据安全性：通过视图，可以对敏感数据进行访问控制和过滤。可以只向用户暴露需要的数据，屏蔽敏感信息。视图还可以限制用户的操作，只允许执行特定的操作，从而提高数据的安全性。
3. 数据重组和转换：视图可以对数据进行重组、转换和聚合操作，以满足特定的需求。可以通过视图来处理复杂的业务逻辑，将多个表的数据组合在一起，提供更便捷的数据访问和分析。
4. 简化应用开发：视图可以作为应用程序的数据接口，提供简单和一致的数据访问方式。应用程序可以直接使用视图进行查询，而无需编写复杂的 SQL 查询语句



#### 相关问题

##### 使用

- 视图是基于查询的结果集，因此对视图的查询实际上是对底层查询进行的。在查询视图时，MySQL 会动态执行底层查询，然后返回结果。

- 视图可以嵌套使用，即一个视图可以基于另一个视图进行定义。

- 视图的结构和数据依赖于底层表的结构和数据。如果底层表发生了更改，视图可能需要相应地进行更新或重新创建。

创建视图：

```sql
CREATE VIEW my_view AS
SELECT column1, column2
FROM my_table
WHERE condition;
```



##### 保存

在 MySQL 中，视图的定义是存储在数据库中的，具体存储在 `information_schema` 数据库的 `VIEWS` 表中。`information_schema` 是一个系统数据库，包含了有关数据库、表、列、索引和其他数据库对象的元数据信息。



##### 更新

在大多数情况下，你可以通过更新视图来更新底层的原数据表中的数据。然而，是否可以成功更新视图取决于视图的定义和一些限制条件。

```sql
UPDATE view_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
```

满足条件：

- 视图必须基于单个表（或多个相关的表）而不是多个表的联接结果；

  > - 单个表：假设我们有一个名为 "Students" 的表，其中包含学生的信息，如学生ID、姓名、年龄和班级等。如果我们的视图是基于这个表的，那么视图的定义可以直接引用 "Students" 表来选择特定的列或添加筛选条件;
  >
  > - 多个相关的表：假设我们有两个表，一个是 "Orders" 表，包含订单的信息，如订单ID、订单日期和客户ID等；另一个是 "Customers" 表，包含客户的信息，如客户ID、姓名和联系方式等。如果我们的视图需要显示订单的详细信息以及关联的客户信息，那么视图的定义可以基于这两个相关的表，通过客户ID进行关联，以便获取订单和客户的相关信息
  > - 多个表的联接结果：假设我们有一个 "Employees" 表，包含员工的信息，如员工ID、姓名和部门ID等；另一个是 "Departments" 表，包含部门的信息，如部门ID和部门名称等。如果我们的视图需要显示员工和所属部门的详细信息，那么视图的定义可能涉及将 "Employees" 表和 "Departments" 表通过部门ID进行联接，以获取员工和部门的相关信息。

- 视图的查询中不能包含以下元素：聚合函数（如 SUM、COUNT）、`DISTINCT` 关键字、`GROUP BY` 子句；

- 视图必须包含主键或唯一索引，以便确保可以唯一地识别要更新的行；