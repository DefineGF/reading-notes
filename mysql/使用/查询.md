### 查询

#### where



#### group by

单独使用 group by 关键字时，查询结果只会显示每个分组的第一条记录；

- 可以与**GROUP_CONCAT()** 函数一起使用， GROUP_CONCAT() 会把每个分组的字符值显示出来

```sql
select sex, group_concat(name) from student_info group by sex;

+------+----------------------------+
| sex  | GROUP_CONCAT(name)         |
+------+----------------------------+
| 女   | Henry,Jim,John,Thomas,Tom  |
| 男   | Dany,Green,Jane,Lily,Susan |
+------+----------------------------+
```

- 使用**COUNT() **统计记录的条数，**SUM()** 计算字段值的总和，**AVG()**计算字段值的平均值，还有**MAX()、MIN()** 等 **聚合函数**

```sql
select sex, count(sex) from student_info group by sex;

+------+------------+
| sex  | COUNT(sex) |
+------+------------+
| 女   |          5 |
| 男   |          5 |
+------+------------+
```

- WITH POLLUP：用来在所有记录的最后加上所有记录的总和；

```sql
select sex, group_concat(name) from student_info group by sex with pollup;

+------+------------------------------------------------------+
| sex  | GROUP_CONCAT(name)                                   |
+------+------------------------------------------------------+
| 女   | Henry,Jim,John,Thomas,Tom                            |
| 男   | Dany,Green,Jane,Lily,Susan                           |
| NULL | Henry,Jim,John,Thomas,Tom,Dany,Green,Jane,Lily,Susan |
+------+------------------------------------------------------+
```



#### having

##### where 区别和having区别

- where 用于过滤 **数据行**，having 用于过滤**分组**；前者在数据分组前过滤，后者数据分组后过滤；
- where不可使用 **聚合函数**，而having可以
- where 针对数据库文件进行过滤，后者针对查询结果（前面已查询出的字段）进行过滤；
- where不能使用字段别名，后者可以

